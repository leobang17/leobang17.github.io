{"version":3,"file":"component---src-templates-article-page-jsx-content-file-path-home-runner-work-leobang-17-github-io-leobang-17-github-io-documents-데이터베이스-database-lock-md-b568b6b627076f191ae9.js","mappings":"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","sources":["webpack://gatsby-theme-simplex/./documents/데이터베이스/Database-lock.md","webpack://gatsby-theme-simplex/./src/templates/ArticlePage.jsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h1: \"h1\",\n    a: \"a\",\n    div: \"div\",\n    p: \"p\",\n    strong: \"strong\",\n    ol: \"ol\",\n    li: \"li\",\n    h4: \"h4\",\n    ul: \"ul\",\n    h5: \"h5\",\n    h3: \"h3\"\n  }, _provideComponents(), props.components);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h1, {\n    id: \"concurrency-control-lock-활용하기\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#concurrency-control-lock-%ED%99%9C%EC%9A%A9%ED%95%98%EA%B8%B0\",\n    \"aria-label\": \"concurrency control lock 활용하기 permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Concurrency Control: Lock 활용하기\"), \"\\n\", React.createElement(_components.p, null, \"write operation은 단순히 값을 바꾸는 일보다 복잡한 작업이 될 수 있다. 만약 해당 table에 index가 걸려있는 경우에는 index에 대한 처리를 해주어야 할 수도 있다.\"), \"\\n\", React.createElement(_components.p, null, \"write operation을 하고 있는 도중 같은 데이터에 또 다른 read/write opeation이 실행된다면 예상치 못한 결과를 가져올 수도 있다.\"), \"\\n\", React.createElement(_components.p, null, \"이는 OS에서 배웠던, 멀티 스레딩 환경에서 공유자원을 다룰 때 발생할 수 있는 race condition과도 유사하다. \", React.createElement(_components.strong, null, \"DBMS에서도 이러한 race condition을 \", React.createElement(\"u\", null, \"Lock\"), \"을 이용해 해결할 수 있다.\"), \" Lock을 취득해야 critical section에 들어갈 수 있고, Lock을 취득하지 못했다면 critical section 앞에서 해당 transaction은 대기하게 된다.\"), \"\\n\", React.createElement(_components.p, null, \"DBMS에서 Concurrency Control을 위해 제공하는 Lock은 다음 두 가지이다:\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"write-lock (= Exclusive Lock) - 배타적 락\"), \"\\n\", React.createElement(_components.li, null, \"read-lock (= Shared Lock) - 공유 락\"), \"\\n\"), \"\\n\", React.createElement(_components.h4, {\n    id: \"write-lock--exclusive-lock\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#write-lock--exclusive-lock\",\n    \"aria-label\": \"write lock  exclusive lock permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Write Lock (= Exclusive Lock)\"), \"\\n\", React.createElement(_components.p, null, \"다른 말로 Exclusive Lock이라고도 한다. 의미상 Exclusive Lock으로 불리는 것이 더 적합할 듯하다. 핵심은 Exclusive하다는 것이고, read와 write 상황에 모두 이용될 수 있기 때문이다.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Read/Write 상황에 모두 이용할 수 있다.\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Write 작업은 Insert, Update, Delete를 포함한다.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"다른 Transaction이 \", React.createElement(\"u\", null, \"같은 데이터를 Read 혹은 Write\"), \"하는 것을 허용하지 않는다.\"), \"\\n\"), \"\\n\", React.createElement(_components.h4, {\n    id: \"read-lock--shared-lock\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#read-lock--shared-lock\",\n    \"aria-label\": \"read lock  shared lock permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Read Lock (= Shared Lock)\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Read 상황에만 이용할 수 있다.\"), \"\\n\", React.createElement(_components.li, null, \"다른 Transaction이 해당 자원을 동시에 Read 하는 것은 허용하나, Write 작업에 대해서는 허용하지 않는다.\"), \"\\n\"), \"\\n\", React.createElement(_components.h5, {\n    id: \"그런데-lock만으로는-모든-이상-현상을-제어할-수는-없다-serializability가-중요하다\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#%EA%B7%B8%EB%9F%B0%EB%8D%B0-lock%EB%A7%8C%EC%9C%BC%EB%A1%9C%EB%8A%94-%EB%AA%A8%EB%93%A0-%EC%9D%B4%EC%83%81-%ED%98%84%EC%83%81%EC%9D%84-%EC%A0%9C%EC%96%B4%ED%95%A0-%EC%88%98%EB%8A%94-%EC%97%86%EB%8B%A4-serializability%EA%B0%80-%EC%A4%91%EC%9A%94%ED%95%98%EB%8B%A4\",\n    \"aria-label\": \"그런데 lock만으로는 모든 이상 현상을 제어할 수는 없다 serializability가 중요하다 permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"그런데 Lock만으로는 모든 이상 현상을 제어할 수는 없다··· Serializability가 중요하다!\"), \"\\n\", React.createElement(_components.p, null, \"Lock을 사용하는 것만으로는 Transaction의 Serializability를 보장할 수는 없다. Lock을 사용했다고 하더라도 Serializability 속성을 획득하지 못한 Non-serial schedule, 즉, serial schedule과 conflict equivalent하지 않은 non-serial schedule을 실행할 경우 이상현상이 발생할 수 있다.\"), \"\\n\", React.createElement(_components.p, null, \"이전의 serializability를 설명하며 어떠한 \", React.createElement(\"u\", null, \"프로토콜\"), \"을 이용해 schedule을 만들어낸다고 했었다. 이제 그 프로토콜에 대해 알아보자.\"), \"\\n\", React.createElement(_components.h3, {\n    id: \"2pl-protocol-two-phase-lock-protocol\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#2pl-protocol-two-phase-lock-protocol\",\n    \"aria-label\": \"2pl protocol two phase lock protocol permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"2PL Protocol (Two-Phase Lock Protocol)\"), \"\\n\", React.createElement(_components.p, null, \"Lock을 획득하거나 돌려놓는 행위를 두 phase로 분리하는 프로토콜이다. 정확히 말하자면, “Transaction에서 \", React.createElement(_components.strong, null, \"모든 locking operation이 최초의 unlock operation 보다 먼저 수행\"), \"되도록 하는 것”가 2PL 프로토콜의 정의가 되겠다. 2PL 프로토콜에는 2가지 Phase가 있다:\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"Expanding Phase (= Growing Phase)\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Lock을 취득하는 phase.\"), \"\\n\", React.createElement(_components.li, null, \"해당 phase에서 Lock을 반환하지는 않는다.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"Shrinking Phase (= Contracting Phase)\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Lock을 반환하는 phase.\"), \"\\n\", React.createElement(_components.li, null, \"해당 phase에서 Lock을 취득하지 않는다.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.p, null, \"예제로 살펴보자:\"), \"\\n\", React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; \\\"\\n    >\\n      <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 91.51515151515152%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACbklEQVR42o2UbY+rNhCF8///WD9W2m4VbTfv2WyABLAxxq/wVJgkl81NpQ5Cxh5z5pyZsRcAwzDQ314TA9JblHejY3Sz2Ww4Ho/c9w63dRhuLw/f4v5xNi1rWfJe5eyVIDNt2lQUBdvtlizLyPM8BR3tqgPr2rMTgU3lODc+rS/mEaWU5FmOaXWaG2u4Xq8sl0v+entLoEMfk68f4HTOyC8lPvQpUGL4oD/8pD4+fd/Tti2rz0/e3v+mrAU29Lg47bXWEINjbg/Jv4BumZkFiN6xzWtOKrKrHdcu0plAJSyq9eSF5lp2WBt/Ac5B54lO8rzj41SyEYEv6bl0kT4OXK4dX9+K46khy1uMCRPgXOp9jMMoLaJjwDjD9lxxqDy7q+HSeLT2ieWzLZ7BpKux0XLqFActOegG2Y2SBFJHGu3xPiKlxbn4GnAu2UaDi/bHpjGH63PFqg5krWesSdd5nI8o5cgKjZB2yuE8+alVQofv/a01piJ559jnNXsZKHVIlR4BZWNTDg9fDeesTWlIDOMQE7N+6NFepflzUT6/y9TERetp/dhOnmcySfIIsG9WbOQHR7Ul198T0xgQzqSiaNuxyypWladQE/ta2CT5oeTe2M8RdJiOXGY0b3XOphVkStA2avq5Hx7jz1Z7qvLdWq/wseNDnvmjWLOU31RtRdM0Ly4HfpO9mG6antBPORkBXewojOKfpuJkFKVWPwBfH4YboPKSQ7NmJZYcmg25PiXHvpW8i4JD17ATJa1SLxn9Z2PfrXGC0Fs2SvBnlZFbTWcMQoiXkn8DHGYVmgBlaiEzHrswVbTTHZfL5X8B/gtg83wjj+Jh+AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <picture>\\n          <source\\n              srcset=\\\"/static/e6e568c4e3630fffa05b5dacda600263/3cd7a/image-20231103173310341.webp 165w,\\n/static/e6e568c4e3630fffa05b5dacda600263/89fe6/image-20231103173310341.webp 330w,\\n/static/e6e568c4e3630fffa05b5dacda600263/3d671/image-20231103173310341.webp 660w,\\n/static/e6e568c4e3630fffa05b5dacda600263/7dc77/image-20231103173310341.webp 990w,\\n/static/e6e568c4e3630fffa05b5dacda600263/04d22/image-20231103173310341.webp 1320w,\\n/static/e6e568c4e3630fffa05b5dacda600263/183a8/image-20231103173310341.webp 1411w\\\"\\n              sizes=\\\"(max-width: 660px) 100vw, 660px\\\"\\n              type=\\\"image/webp\\\"\\n            />\\n          <source\\n            srcset=\\\"/static/e6e568c4e3630fffa05b5dacda600263/103f2/image-20231103173310341.png 165w,\\n/static/e6e568c4e3630fffa05b5dacda600263/748ba/image-20231103173310341.png 330w,\\n/static/e6e568c4e3630fffa05b5dacda600263/7c811/image-20231103173310341.png 660w,\\n/static/e6e568c4e3630fffa05b5dacda600263/d28e0/image-20231103173310341.png 990w,\\n/static/e6e568c4e3630fffa05b5dacda600263/bb51b/image-20231103173310341.png 1320w,\\n/static/e6e568c4e3630fffa05b5dacda600263/8f817/image-20231103173310341.png 1411w\\\"\\n            sizes=\\\"(max-width: 660px) 100vw, 660px\\\"\\n            type=\\\"image/png\\\"\\n          />\\n          <img\\n            class=\\\"gatsby-resp-image-image\\\"\\n            src=\\\"/static/e6e568c4e3630fffa05b5dacda600263/7c811/image-20231103173310341.png\\\"\\n            alt=\\\"image 20231103173310341\\\"\\n            title=\\\"\\\"\\n            loading=\\\"lazy\\\"\\n            decoding=\\\"async\\\"\\n            style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n          />\\n        </picture>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(_components.p, null, \"2PL 프로토콜은 serializability를 항상 보장한다!\"), \"\\n\", React.createElement(_components.h5, {\n    id: \"하지만-2pl-프로토콜에는-데드락이-발생할-수도-있다\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#%ED%95%98%EC%A7%80%EB%A7%8C-2pl-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C%EC%97%90%EB%8A%94-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%A0-%EC%88%98%EB%8F%84-%EC%9E%88%EB%8B%A4\",\n    \"aria-label\": \"하지만 2pl 프로토콜에는 데드락이 발생할 수도 있다 permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"하지만 2PL 프로토콜에는 데드락이 발생할 수도 있다.\"), \"\\n\", React.createElement(_components.p, null, \"데드락의 경우 Lock을 이미 가지고 있으면서도 다른 Lock을 위해 대기하고 있을 때 발생했다. 서로가 서로에게 필요한 Lock을 가지고 있어 둘 다 영원히 대기만하는 그런 상황.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"해결하는 방식은 OS에서 데드락을 해결하는 방식과 유사하다.\"), \"\\n\"), \"\\n\", React.createElement(_components.h4, {\n    id: \"conservative-2pl-protocol\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#conservative-2pl-protocol\",\n    \"aria-label\": \"conservative 2pl protocol permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Conservative 2PL Protocol\"), \"\\n\", React.createElement(_components.p, null, \"이름 그대로 보수적인 2PL 프로토콜이다. \", React.createElement(_components.strong, null, \"모든 Lock을 취득한 이후에 transaction을 시작\"), \"하는 프로토콜. 따라서 해당 transaction에 필요한 Lock을 모두 긁어모으는 것으로부터 transaction이 시작된다.\"), \"\\n\", React.createElement(_components.p, null, \"데드락이 발생하지 않는다는 장점이 있지만, 트랜잭션 자체를 시작하기 어려운 조건이므로 실용적인 방법은 아니라고 할 수 있다.\"), \"\\n\", React.createElement(_components.h4, {\n    id: \"strict-2pl-protocol--s2pl-protocol\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#strict-2pl-protocol--s2pl-protocol\",\n    \"aria-label\": \"strict 2pl protocol  s2pl protocol permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Strict 2PL Protocol (= S2PL Protocol)\"), \"\\n\", React.createElement(_components.p, null, \"schedule 시간에 배웠던 strict schedule을 보장하는 프로토콜이다. \", React.createElement(_components.strong, null, \"write-lock을 취득했다면 그 transaction을 commit/rollback할 때 반환\"), \"히는 프로토콜.\"), \"\\n\", React.createElement(_components.p, null, \"recoverability를 무조건 보장한다.\"), \"\\n\", React.createElement(_components.h4, {\n    id: \"strong-strict-2pl-protocol--ss2pl-혹은-rigorous-protocol\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#strong-strict-2pl-protocol--ss2pl-%ED%98%B9%EC%9D%80-rigorous-protocol\",\n    \"aria-label\": \"strong strict 2pl protocol  ss2pl 혹은 rigorous protocol permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"Strong Strict 2PL Protocol (= SS2PL 혹은 Rigorous Protocol)\"), \"\\n\", React.createElement(_components.p, null, \"역시 strict schedule을 보장하는 프로토콜이다. S2PL과 다른 점은 write-lock과 read-lock을 모두 취급한다는 점이다. \", React.createElement(_components.strong, null, \"write-lock 혹은 read-lock을 취득했다면 그 transaction을 commit/rollback할 때 반환\"), \"하는 프로토콜.\"), \"\\n\", React.createElement(_components.p, null, \"recoverability를 보장하며 S2PL보다 구현이 쉽다는 장점이 있다. 하지만 Lock을 그만큼 오래동안 쥐고 있으므로 transaction의 전체적인 처리량이 저하될 수 있다는 단점도 가지고 있다.\"), \"\\n\", React.createElement(_components.h5, {\n    id: \"근데-현대적인-dbms는-2pl-잘-안쓴대요\",\n    style: {\n      position: \"relative\"\n    }\n  }, React.createElement(_components.a, {\n    href: \"#%EA%B7%BC%EB%8D%B0-%ED%98%84%EB%8C%80%EC%A0%81%EC%9D%B8-dbms%EB%8A%94-2pl-%EC%9E%98-%EC%95%88%EC%93%B4%EB%8C%80%EC%9A%94\",\n    \"aria-label\": \"근데 현대적인 dbms는 2pl 잘 안쓴대요 permalink\",\n    className: \"header-links before\"\n  }, React.createElement(_components.div, {\n    dangerouslySetInnerHTML: {\n      __html: \"<svg aria-hidden=\\\"true\\\" focusable=\\\"false\\\" height=\\\"16\\\" version=\\\"1.1\\\" viewBox=\\\"0 0 16 16\\\" width=\\\"16\\\"><path fill-rule=\\\"evenodd\\\" d=\\\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\\\"></path></svg>\"\n    }\n  })), \"근데 현대적인 DBMS는 2PL 잘 안쓴대요.\"), \"\\n\", React.createElement(_components.p, null, \"초창기 DBMS에서는 S2PL 혹은 SS2PL을 많이 사용했었다. 하지만 read-read 상황을 제외하고는 모든 transaction을 block 해버리니까 \", React.createElement(\"u\", null, \"처리량이 안습\"), \"이었다. write-write는 위험한 경우니 막더라도, \", React.createElement(\"u\", null, \"read-write 정도는 block하지 않고 동시에 허용할 수 있지 않을까?\"), \" 하는 고민들이 계속되었고, 결국 해결책으로 찾은 방법이 MVCC이다.\"), \"\\n\", React.createElement(_components.p, null, \"오늘날 대부분의 DBMS는 lock과 MVCC를 섞어서 활용한다.\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\n","import GATSBY_COMPILED_MDX from \"/home/runner/work/leobang17.github.io/leobang17.github.io/documents/데이터베이스/Database-lock.md\";\nimport React from 'react';\nimport {graphql} from 'gatsby';\nimport ArticleLayout from 'components/Layout/ArticleLayout';\nimport MarkdownWrapper from 'components/MarkdownWrapper';\nimport ArticleFrontmatter from 'components/ArticleFrontmatter';\nimport ArticlePageContext from 'contexts/ArticlePageContext';\nimport Utterances from 'components/Utterance';\nimport RecentPosts from 'components/RecentPosts/RecentPosts';\nconst isBrowser = typeof window !== undefined;\nconst ArticlePage = ({data, children, serverData}) => {\n  const {prevPost, nextPost} = data;\n  const frontmatters = {\n    ...data.mdx.frontmatter,\n    timeToRead: data.mdx.fields.timeToRead\n  };\n  return React.createElement(ArticlePageContext, {\n    data: data\n  }, React.createElement(ArticleLayout, null, React.createElement(ArticleFrontmatter, frontmatters), React.createElement(MarkdownWrapper, null, children), React.createElement(RecentPosts, {\n    prev: prevPost,\n    next: nextPost\n  }), React.createElement(Utterances)));\n};\nArticlePage\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(ArticlePage, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nexport const query = graphql`\n  query ($id: String, $nextId: String, $prevId: String) {\n    mdx(id: { eq: $id }) {\n      id\n      fields {\n        slug\n        timeToRead\n        categoryDirectory\n      }\n      frontmatter {\n        title\n        createdAt(formatString: \"MMMM DD, YYYY\")\n      }\n      tableOfContents\n    }\n    prevPost: mdx(id: { eq: $prevId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n    nextPost: mdx(id: { eq: $nextId }) {\n      fields {\n        slug\n      }\n      frontmatter {\n        title\n      }\n    }\n  }\n`;\nexport {ArticlePageHead as Head} from 'components/head';\n"],"names":["_createMdxContent","props","_components","Object","assign","h1","a","div","p","strong","ol","li","h4","ul","h5","h3","_provideComponents","components","React","id","style","position","href","className","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","ArticlePage","data","children","serverData","prevPost","nextPost","frontmatters","mdx","frontmatter","timeToRead","fields","ArticlePageContext","ArticleLayout","ArticleFrontmatter","MarkdownWrapper","RecentPosts","prev","next","Utterances","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}