"use strict";(self.webpackChunkgatsby_theme_simplex=self.webpackChunkgatsby_theme_simplex||[]).push([[666],{5463:function(e,n,l){l.r(n),l.d(n,{Head:function(){return o.py},default:function(){return f}});var a=l(1151),t=l(7294);function c(e){const n=Object.assign({p:"p",strong:"strong",h2:"h2",a:"a",div:"div",ol:"ol",li:"li",pre:"pre",code:"code",blockquote:"blockquote",em:"em",h4:"h4",ul:"ul",h5:"h5"},(0,a.ah)(),e.components);return t.createElement(t.Fragment,null,t.createElement(n.p,null,"Golang의 dynamic array를 구현한 slice는 다른 프로그래밍 언어와 비교했을 때 미묘하게 주의해아할 점들이 있다. slice 초기화, append를 이용한 element 추가, slice 복제, slicing 등을 올바르게 처리하려면 slice의 ",t.createElement(n.strong,null,"length"),"와 ",t.createElement(n.strong,null,"capacity")," 개념을 올바르게 이해해야한다."),"\n",t.createElement(n.h2,{id:"slice의-표현",style:{position:"relative"}},t.createElement(n.a,{href:"#slice%EC%9D%98-%ED%91%9C%ED%98%84","aria-label":"slice의 표현 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Slice의 표현"),"\n",t.createElement(n.p,null,"Golang에서 slice는 내부적으로 array (가장 기본적인 static array)를 기반으로 제공된다. slice의 구조는 다음 3가지 요소로 표현된다."),"\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"내부 array에 대한 pointer"),"\n",t.createElement(n.li,null,"현재 slice에 담긴 length = 내부 array의 어디까지 표현할 것인가"),"\n",t.createElement(n.li,null,"내부 array의 capacity"),"\n"),"\n",t.createElement(n.p,null,"초기화 및 원소 추가를 수행하며 확실하게 알아보자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"s := make([]int, 3, 6)\n// s는 length=3 capacity=6 인 slice이다.\n")),"\n",t.createElement(n.blockquote,null,"\n",t.createElement(n.p,null,t.createElement(n.code,null,"make"),"를 이용해서 slice를 초기화한다면 2번째 parameter인 length는 꼭 지정해주어야 한다. 하지만 3번째 parameter는 optional인데, 만약 지정해주지 않는다면 length = capacity인 slice가 초기화되게 된다."),"\n"),"\n",t.createElement(n.p,null,"길이를 ",t.createElement(n.code,null,"3"),"으로 지정했기 때문에 내부 배열의 맨 앞 세 element는",t.createElement(n.code,null," int")," 타입의 zero value ",t.createElement(n.code,null,"0"),"으로 초기화된다. 이 상황에서 ",t.createElement(n.code,null,"s")," 를 화면에 출력하면 ",t.createElement(n.code,null,"[0, 0, 0]"),"을 볼 수 있다."),"\n",t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 53.93939393939393%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABxklEQVR42m2T626jMBCFef+H6TvkV7aqlGy7VWhSriFAgAAh4VZj861MLru9HOloxvJwPGdsjHEc0dBx4jXXkHVH5+9pnZhum9B5ezo/oV55tG485ecXh/Nvi2blI7Ijhv4wiiK+CmuosmaIC+S+nKjz8dQyHhsQEuQIHxJ5apHnlnGQGIfDAc/z0LHIC25QgyIJY8JkTxBHxFlCvN/j2g7O1me92Uy0XQeh5KUZwAiCgNlsxp/XF9zIpmxzGnkmrna8uSae4/H2tsb3PCzLYmWaLBYL5vNfPD098fj4SFUd7+6MOI4pimLiNtgiBoGeZC86giicxhEGPnEYEoU7XNvGtiwc22Kz2eB4PuWx+if4/PzMcrkkyzJ0t0qqu+1uUBSNIDkLqm7g1A80QtFeqUedNwNqvBjWa8NxnMlCnudTl1LK+2kaWsBMe4JK8J5/kNYDZtqxSjvUteYmpuN0KRrauuu6KKW+3XbZSdZZz3veszn0vCYdVt5z6j8fPlmez+c8PDxMYrvd7lOHt8KsGQgrQXQSk3jeDpz1c1H/PzUulsuyRAiBtm6a5jex8W7rZ3zdN9I0RYvWdU3TNJ8Kv/1FP/Cr6F9+REnYkLHYogAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/fd2906652897899a05bacc2d319e22d1/3cd7a/image-20240419094108733.webp 165w,\n/static/fd2906652897899a05bacc2d319e22d1/89fe6/image-20240419094108733.webp 330w,\n/static/fd2906652897899a05bacc2d319e22d1/3d671/image-20240419094108733.webp 660w,\n/static/fd2906652897899a05bacc2d319e22d1/7dc77/image-20240419094108733.webp 990w,\n/static/fd2906652897899a05bacc2d319e22d1/b47fd/image-20240419094108733.webp 1170w"\n              sizes="(max-width: 660px) 100vw, 660px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/fd2906652897899a05bacc2d319e22d1/103f2/image-20240419094108733.png 165w,\n/static/fd2906652897899a05bacc2d319e22d1/748ba/image-20240419094108733.png 330w,\n/static/fd2906652897899a05bacc2d319e22d1/7c811/image-20240419094108733.png 660w,\n/static/fd2906652897899a05bacc2d319e22d1/d28e0/image-20240419094108733.png 990w,\n/static/fd2906652897899a05bacc2d319e22d1/77666/image-20240419094108733.png 1170w"\n            sizes="(max-width: 660px) 100vw, 660px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/fd2906652897899a05bacc2d319e22d1/7c811/image-20240419094108733.png"\n            alt="image-20240419094108733"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">image-20240419094108733</figcaption>\n  </figure>'}}),"\n",t.createElement(n.p,null,"slice의 ",t.createElement(n.em,null,"length는 slice가 표현하는 범위"),"이고, slice의 capacity는 ",t.createElement(n.em,null,"현재 실제 내부 array가 메모리에 할당된 크기"),"이다. (초기화 후 아직 동적으로 확장되지 않았다고 가정하자.) ",t.createElement(n.strong,null,"slice는 length를 벗어나는 element에 접근할 수 없다.")," 내부 array로는 할당된 공간임에도 그렇다. 예를들어, ",t.createElement(n.code,null,"s[4] = 0")," 과 같은 시도는 index error를 발생시킬 것이다."),"\n",t.createElement(n.h4,{id:"append의-동작-메커니즘",style:{position:"relative"}},t.createElement(n.a,{href:"#append%EC%9D%98-%EB%8F%99%EC%9E%91-%EB%A9%94%EC%BB%A4%EB%8B%88%EC%A6%98","aria-label":"append의 동작 메커니즘 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"append의 동작 메커니즘"),"\n",t.createElement(n.p,null,"이제, slice의 빈공간을 활용하는 ",t.createElement(n.code,null,"append"),"를 이용해보자. Golang의 ",t.createElement(n.code,null,"append"),"는 특이하게 반환값이 있고, 언어 수준에서 이 반환값을 이용하도록 강제하고 있다. ",t.createElement(n.code,null,"append"),"의 메커니즘은 다음과 같다."),"\n",t.createElement(n.ol,null,"\n",t.createElement(n.li,null,"slice.length의 다음 공간에 새로운 element를 저장한다.","\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,"만약 capacity를 초과하는 ",t.createElement(n.code,null,"append")," 호출이라면, capacity가 늘어난 새로운 내부 배열을 생성하고 기존 내부 배열의 값을 옮겨넣은 뒤 새로운 element를 저장한다."),"\n",t.createElement(n.li,null,"이 때 pointer는 새로 생성한 내부 array를 가리키게 된다. 기존의 slice를 저장한 표현이 있다면, 해당 표현과는 length, capacity는 물론 pointer까지 바뀐 완전히 새로운 slice를 표현하게 된다."),"\n"),"\n"),"\n",t.createElement(n.li,null,"slice에 대한 표현을 반환한다."),"\n"),"\n",t.createElement(n.blockquote,null,"\n",t.createElement(n.h5,{id:"golang에서-dynamic-array의-새-배열-capacity를-정하는-방법",style:{position:"relative"}},t.createElement(n.a,{href:"#golang%EC%97%90%EC%84%9C-dynamic-array%EC%9D%98-%EC%83%88-%EB%B0%B0%EC%97%B4-capacity%EB%A5%BC-%EC%A0%95%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95","aria-label":"golang에서 dynamic array의 새 배열 capacity를 정하는 방법 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Golang에서 Dynamic Array의 새 배열 capacity를 정하는 방법"),"\n",t.createElement(n.p,null,"element의 개수가 ",t.createElement(n.em,null,"1024개 이하일 때에는 내부 array의 크기가 2배씩")," 늘고, ",t.createElement(n.em,null,"1024개를 넘어가면 25%")," 씩 늘어난다."),"\n"),"\n",t.createElement(n.p,null,t.createElement(n.code,null,"append"),"는 slice에 대한 ",t.createElement(n.em,null,"갱신된")," 표현을 반환한다. slice에 대한 ",t.createElement(n.code,null,"append"),"작업은 ",t.createElement("u",null,"해당 slice의 내부 array를 참조하고 있는 것은 맞지만, 반환되는 slice에 대한 표현은 기존의 slice에 대한 표현과는 다른 ‘value’처럼 취급"),"된다. 다음의 예시로 확인해보자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"// len: 3, cap: 6이라고 가정하자.. 이렇게 리터럴로 할당할 경우 len = cap이 되어버려서 다음 append에 새로운 내부배열을 생성한다.\ns1 := []int{ 10, 20, 30 }\t\ns2 := append(s1, 40)\n")),"\n",t.createElement(n.p,null,"지금까지 일반적으로 경험했던 프로그래밍 언어에 기반하면, ",t.createElement(n.code,null,"s1"),"을 출력해도 ",t.createElement(n.code,null,"s2"),"를 출력해도 둘은 동일하게 ",t.createElement(n.code,null,"[10, 20, 30, 40]"),"이 화면에 표시되어야 한다. 둘은 같은 ‘Array에 대한 표현’를 참조하고 있기 때문이다. 하지만 Golang은 다르다."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"fmt.Println(s1) // [10, 20, 30]\nfmt.Println(s2) // [10, 20, 30, 40]\n")),"\n",t.createElement(n.p,null,"말했듯이 ",t.createElement(n.code,null,"append"),"의 반환은 ‘slice에 대한 갱신된 표현’이고, 이는 기존의 표현과는 별개의 ‘값’이다. pointer, length, capacity를 나타내는 값 struct가 반환된다고 생각하는게 편하겠다. pointer는 참조값이기에 두 slice의 표현은 여전히 하나의 내부 array를 가리키지만 length가 다르기 때문에 두 slice가 실제로 표현하는 결과가 다른 것이다."),"\n",t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 97.57575757575758%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAACiUlEQVR42p2UW1PiQBCF8///iU9qWb76QpW4i0IWCCQkaCK53whMQu45Wz0KC1u6LnbV5FKp+dLd50wLbduirmt0XXeyQAtAW9XIdRfpTEfSl7BTLSS9Ccogefvetif7BMdxIEkS/o7uHdhlBdqYofYTNHaMygpRvXhA3eCjEGzbxnK5BIFdx4VlWkjWb3/fxVuY6gtMz4EfhTBsE34YwFA0BGEIwzDw+voK0zSh6zrKsoTw9PSEi4sLiKKIrGFwEguzlymylkGxZlgsFxBHIgxdx0ySoMgyFoqC8a9fGIkjjEYjjMdjDAYDZFkGQZZlTCYT/qc0YwjjECtzxTM0fQPD4QBDUcRYmkJeqpAUGcqzhul8hscfPzGfzzGdTkGcPM8hbLdbpGmKOI4RhhEsy+JlU7BdAs95RpfkqKIN8pWPchUgNwOUdoQmK9C993vfc4EEuby85KlTuJ4L3/f5c17vkDYMlR0jU1ZgQxXbgQL2uMBONffqnQgpuK7LGxoEATabDeidmk2RVgxZxfBZ8MyOMuRAaiipTItgi8XiACzqHJty/baZ/NZ2f9beVkfl8pL7/T5ubm7Q6/WgqioHkw0oyqbApohPNp6Y/8ivByCVS5mRH+lOotB9D0yOgP8TQlVVh5f1en2ykURh1eY8IF0I6nke7u7uEEURmqYBdXtbJqia8nwg2YTEub+/hzyX4bgOVF2Bn9mo2/p8IFmGRLm+vuZ+TFOGuSYhLdiHSn4JpHIfHh64yiQO2UZTNbRtd1Z2B2AYhjzD29tb7kOyDp3Nz7z2JZCEIEGurq74oKBRpmkaH7zfypB6qCjKITuaGlR2URTfAzLGuJnpLNPUoZ5S1p+dhn8BfwNpzfnt/etU+gAAAABJRU5ErkJggg==\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/79eb27c18cd8088a39ff130bfe890bf1/3cd7a/image-20240419100332042.webp 165w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/89fe6/image-20240419100332042.webp 330w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/3d671/image-20240419100332042.webp 660w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/7dc77/image-20240419100332042.webp 990w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/f8929/image-20240419100332042.webp 1268w"\n              sizes="(max-width: 660px) 100vw, 660px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/79eb27c18cd8088a39ff130bfe890bf1/103f2/image-20240419100332042.png 165w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/748ba/image-20240419100332042.png 330w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/7c811/image-20240419100332042.png 660w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/d28e0/image-20240419100332042.png 990w,\n/static/79eb27c18cd8088a39ff130bfe890bf1/248ed/image-20240419100332042.png 1268w"\n            sizes="(max-width: 660px) 100vw, 660px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/79eb27c18cd8088a39ff130bfe890bf1/7c811/image-20240419100332042.png"\n            alt="image-20240419100332042"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">image-20240419100332042</figcaption>\n  </figure>'}}),"\n",t.createElement(n.p,null,"그림에서 보듯, 내부 배열에 대한 정보는 동일하다. 다만 ",t.createElement(n.code,null,"s1"),"과 ",t.createElement(n.code,null,"s2"),"가 slice를 표현하는 정보가 다르다. ",t.createElement(n.code,null,"s1"),"은 아직 length가 3이기에 세번째 원소까지만 다룰 수 있는 것이다."),"\n",t.createElement(n.p,null,"그럼, 이번에 또 ",t.createElement(n.code,null,"s1"),"에 ",t.createElement(n.code,null,"append"),"를 해보자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"// 마찬가지로 리터럴로 초기화했지만 length: 3, capacity: 6으로 가정하자...\ns1 := []int{ 10, 20, 30 }\t\ns2 := append(s1, 40)\ns3 := append(s1, 50)\n")),"\n",t.createElement(n.p,null,"이미 ",t.createElement(n.code,null,"s1"),"과 ",t.createElement(n.code,null,"s2"),"는 표현이 다른데··· ",t.createElement(n.code,null,"s1"),"의 표현에 대해서 ",t.createElement(n.code,null,"append"),"를 수행했다. 그런데 내부 array는 이미 4번째 element까지 값이 차있는데 어떻게 될까?"),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"fmt.Println(s1) // [10, 20, 30]\nfmt.Println(s2) // [10, 20, 30, 50]\nfmt.Println(s3) // [10, 20, 30, 50]\n")),"\n",t.createElement(n.p,null,"이렇게 된다. 왜 이렇게 되는지에 대해서는 위의 ",t.createElement(n.code,null,"append"),"의 메커니즘을 참고하면 이해가 쉽다. ",t.createElement(n.code,null,"append"),"는 ",t.createElement(n.em,null,"제공된 slice.length의 다음 공간에 주어진 값을 저장"),"한다. ",t.createElement(n.code,null,"s1"),"의 length는 3이니 4번째 공간에 ",t.createElement(n.code,null,"50"),"을 저장하고, 해당 slice에 대한 갱신된 표현을 반환한 것이다. 그림으로 보면 다음과 같다."),"\n",t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 98.7878787878788%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAABYlAAAWJQFJUiTwAAADQklEQVR42nVUaW/iShDk//+YfImiRMlbJWRfsuIMhw8uAzYYbHyOb/BRTz0GNtmXbWk09nimXN1V042qqlCWJWj+blCc3ACpaoK1J4gkFbGsgXVnqKNC+Wl/g5aGwyGCIMCfUaECihKlH6GwGI5LA7nuIFP2qAwXYQHso/LLmcZut8NsNoOqqjiYB+x3e5iGibKoNzorHYfDAYZtwXRtGI4NzzCxWO/wj7DFYLqGZR2w1XVYloXGZDLBy8sL7u7uYLs2sirBaq9ga2vIygQ9qQNlrkAUBOx3O3TabegbDbc/3tERphj1O2i3OxiNRlgulzVgu93GcDCEaZnwIgebnQbHq8Fbo38hygJa3Q7GkoiRLEKQRPSlCd7ff0EYC+j1e5AkCZqmobFarXA6nRBFEWzbhud62GgbBKyuqbzpYq8vUYUZTg5Dppo4Wj7yg4fcZqiKktf6KgoBUsoPDw9I0xRJmvBaXETaxmukzOdCxBMNfnOEWFTh/xyjiNKzetVvUTabDebzOR+MMbiuywWiZ4p9uEGMBLnFEA4VpKoB9kuC9zJELK7B3oSaHcet0Fiv1zx3AibFTdPEdDq9MjSiLaI8BLIShROhSk4oWYKCxchZjCLJziTPKeu6jtvbWzw/P+Pt7e0KSDXltkkOsBMTcREhLuPrXOJ3mtXnlLfbLQzD4OyIKQmjairiOOYbvMzBsTgizkMkeYT4FIJlLh+fwa4M6WCW1bTzPIfv+9dNRVnATe362ynn43zZ4GfO/9hxhpcHso4sy/waUpRnO7ipxd/JDYvFAkmS8J8GR+8Luy+AxFJRFHx8fKDVavH058octm+BnVws5gs0X5u4v7+H4zhYb5fQfRUlyu8BKWUS4unpiQtECtMh7bDiLPu9Pr9NzWaTe1SeSWCR/6V2V8DLC7GjdIkpNYNup4sgCOvbIsv8+3g85vai63at5581vCzQnaYGQdYhFsSIakVB3YhKQWvkCFEUEYTB9wypuVIMBgPc3Nzg8fGRH6LucTG3IAh4fX1Fr9fjDInpxVZ/ZUgsaCMNKjyBUuoUxKjb7fKOQkrTfDwe/24bWiRlCcjzvLqhGgbCMLz6kzIha9EgsO8sQ4D/ATkg4Xca03y1AAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/bbbfc13a117fd6534ca7300c753fd4ab/3cd7a/image-20240419102550465.webp 165w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/89fe6/image-20240419102550465.webp 330w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/3d671/image-20240419102550465.webp 660w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/887dd/image-20240419102550465.webp 873w"\n              sizes="(max-width: 660px) 100vw, 660px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/bbbfc13a117fd6534ca7300c753fd4ab/103f2/image-20240419102550465.png 165w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/748ba/image-20240419102550465.png 330w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/7c811/image-20240419102550465.png 660w,\n/static/bbbfc13a117fd6534ca7300c753fd4ab/cd4d8/image-20240419102550465.png 873w"\n            sizes="(max-width: 660px) 100vw, 660px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/bbbfc13a117fd6534ca7300c753fd4ab/7c811/image-20240419102550465.png"\n            alt="image-20240419102550465"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">image-20240419102550465</figcaption>\n  </figure>'}}),"\n",t.createElement(n.h4,{id:"slicing-연산",style:{position:"relative"}},t.createElement(n.a,{href:"#slicing-%EC%97%B0%EC%82%B0","aria-label":"slicing 연산 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"slicing 연산"),"\n",t.createElement(n.p,null,"slicing 연산에 대해서도 알아보자. slicing은 array나 slice에 대한 ",t.createElement("u",null,"half-open range")," 연산이다. 즉, 첫번째 index는 포함하고 두 번째 index는 제외한다. slicing 연산을 직접 눈으로 확인해보자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"s1 := make([]int, 3, 6)\t\t// length: 3, capacity: 6\ns2 := s1[1:3]\t\t\t\t\t\t\t// length: 2, capacity: 5\n")),"\n",t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 81.81818181818181%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAACZElEQVR42p2USW/iQBCF/f9/Tw7JIYccRllGBFCYYcc2YPCKjRfw/o2qg6NkkjlMSip1291+fvXqdWtt29KFzLuUaNqWrGw4li2Hc80hb/CzCv2QYx0Lnncnxu6Zc9kQZBVl3aLJh3meU5blB2BoiYsaP6lIl3uS3oL4xy+Shwnn8ebyQ6gvfOKi4VReAE3TxPM8TqcTaZLSkT5X4K8dUtcnsj1i2yPaOUTGjjROyLKU4/GI7/volk1RFGjyMBwO6ff7WJaF5WxxQ4eyLTjmIYv5HMd10U2D7c5So+wb9PsMBwOen58Zj8dMp1PiOEZbLpfc3t5yd3eH67rYwZ61bZC3J6I8YDqbYm0tDMPANEzW2w1ra8tkPmOurxSZl5cXRqMRSRKjycbBYKBe7Pd7JuMJgR+86RkEgSppNVuh76d4lkWwXOOMZhyMLXEUEkcR3iEkPRdoAvL09KQYih5Cf71eX0Rv3oDDHMLU5zA1ifo6/s85Xm9JXLyuJyUc8wZNGnJ9fa0Ahf5sNsO27bduN80rqHTQy0KORY57bjGSCj2uGNknnKQkrxqKukGT7q5WKxzHUaWJ4DJ2IbrKukRWxdRN0Znrkh9DEw9GUaTKlcyyTC2IBQRss9koja3tDtM2qNpK4bw/BO9T4x+RJAmPj4/c3Fyjr3Ty+sxv84WG+kvATiLt74VOM+mueFNc8CqJjWHo1HX97jR9jk8Mu41i0vv7e66urphMJkrbxWJBURbfAxQ9xU4PDw8KUFiKpUTzbwGmaarAer2eMv1ut1Msu0vkvwGFSRiGqutSvsyF9ftr7ivAP3UPwzJDZwXGAAAAAElFTkSuQmCC\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/fa052a5f52562b165adff4493cd5fdf9/3cd7a/image-20240419144156491.webp 165w,\n/static/fa052a5f52562b165adff4493cd5fdf9/89fe6/image-20240419144156491.webp 330w,\n/static/fa052a5f52562b165adff4493cd5fdf9/3d671/image-20240419144156491.webp 660w,\n/static/fa052a5f52562b165adff4493cd5fdf9/7dc77/image-20240419144156491.webp 990w,\n/static/fa052a5f52562b165adff4493cd5fdf9/e1702/image-20240419144156491.webp 996w"\n              sizes="(max-width: 660px) 100vw, 660px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/fa052a5f52562b165adff4493cd5fdf9/103f2/image-20240419144156491.png 165w,\n/static/fa052a5f52562b165adff4493cd5fdf9/748ba/image-20240419144156491.png 330w,\n/static/fa052a5f52562b165adff4493cd5fdf9/7c811/image-20240419144156491.png 660w,\n/static/fa052a5f52562b165adff4493cd5fdf9/d28e0/image-20240419144156491.png 990w,\n/static/fa052a5f52562b165adff4493cd5fdf9/0e821/image-20240419144156491.png 996w"\n            sizes="(max-width: 660px) 100vw, 660px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/fa052a5f52562b165adff4493cd5fdf9/7c811/image-20240419144156491.png"\n            alt="image-20240419144156491"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">image-20240419144156491</figcaption>\n  </figure>'}}),"\n",t.createElement(n.p,null,"두 slice는 동일한 내부 array를 참조하기 때문에 둘의 표현이 겹치는 index 1-2 구간을 변경하면 둘 모두에서 확인이 가능하다. 하지만 둘은 내부 array의 시작점 (pointer)와 length, capacity가 다르다."),"\n",t.createElement(n.p,null,"만약 slicing한 배열에 element를 계속해서 추가해서 내부적으로 새 array를 생성하도록 하면 어떻게 될까?"),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"s2 = append(s2, 2, 3, 4) // 이 시점에서 length: 5, capacity: 5로 임계지점에 도달한다.\ns2 = append(s2, 5)\t\t\t // 새로운 공간을 동적으로 확장할 시점.\n")),"\n",t.createElement(n.p,null,"새 array의 크기는 capacity가 1024 이하일 경우엔 2배로 확장한다. ",t.createElement(n.code,null,"s2"),"의 capacity는 5이므로, 내부적으로 길이가 10인 내부 배열이 생성된다. 그리고, 기본 배열의 값을 ",t.createElement(n.code,null,"s2"),"의 pointer가 가리키는 지점부터 시작해서 복사해넣는다. 이를 그림으로 표현하면 다음과 같다."),"\n",t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<figure class="gatsby-resp-image-figure" style="">\n    <span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 660px; "\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 52.121212121212125%; position: relative; bottom: 0; left: 0; background-image: url(\'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABpklEQVR42nWS2W7iQBBF+f9fgjce4HEYj4QCeMd2433BjR0vJ+omMElQSrJaLlXfuksvAIZh4GcNWc3NDJFvPlMjkc1MbN9InI7YliTejcSVDP2k5+d51uei73s8z6OqKq7XVjfbqiYLBIkfkrhnhBMQ+Bc8O8B3I4b38dvyB5gGFEKwXC45n8+ILKLuS3zhEYYRtudxiS+Ypont2FiWieu5tFI+gb6CacAoilitVpxOJ31xnEYU67oqCeKcpKgoy4q2aWivDTepVMwvzJ6SFeB6veZ4PGJZFuP4XU43Qt3PVN2sz7AZeEs6hnFSKE+Wj29RFIX2MI5jsizTTRWS6immquT7xE50/BEdqZxoXzP8L/mBPE33tMqyZLPZYPw18AKXpq+4thJfpASXlCTNqIpcLy/ygiRJyPP7vwp28dODNE0xDAPXdXVQ+TXFjRwOhwOWY+GcPUzb0hapoHa7nfbf932tavFVvyq1bbvd3kEdl0aFUdVcbJ/o3xFhHMn8kFzEFGmmFSnbFDs1+8JQDait+/1es5SfT4R+YMoaxrhkbuSvHn4AvZL6kOi0hxgAAAAASUVORK5CYII=\'); background-size: cover; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/02fb24d0c302ae529ff350a9d83ce605/3cd7a/image-20240419145406394.webp 165w,\n/static/02fb24d0c302ae529ff350a9d83ce605/89fe6/image-20240419145406394.webp 330w,\n/static/02fb24d0c302ae529ff350a9d83ce605/3d671/image-20240419145406394.webp 660w,\n/static/02fb24d0c302ae529ff350a9d83ce605/7dc77/image-20240419145406394.webp 990w,\n/static/02fb24d0c302ae529ff350a9d83ce605/04d22/image-20240419145406394.webp 1320w,\n/static/02fb24d0c302ae529ff350a9d83ce605/1f7d3/image-20240419145406394.webp 1490w"\n              sizes="(max-width: 660px) 100vw, 660px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/02fb24d0c302ae529ff350a9d83ce605/103f2/image-20240419145406394.png 165w,\n/static/02fb24d0c302ae529ff350a9d83ce605/748ba/image-20240419145406394.png 330w,\n/static/02fb24d0c302ae529ff350a9d83ce605/7c811/image-20240419145406394.png 660w,\n/static/02fb24d0c302ae529ff350a9d83ce605/d28e0/image-20240419145406394.png 990w,\n/static/02fb24d0c302ae529ff350a9d83ce605/bb51b/image-20240419145406394.png 1320w,\n/static/02fb24d0c302ae529ff350a9d83ce605/ad2a0/image-20240419145406394.png 1490w"\n            sizes="(max-width: 660px) 100vw, 660px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/02fb24d0c302ae529ff350a9d83ce605/7c811/image-20240419145406394.png"\n            alt="image-20240419145406394"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>\n    <figcaption class="gatsby-resp-image-figcaption">image-20240419145406394</figcaption>\n  </figure>'}}),"\n",t.createElement(n.h5,{id:"full-slice-expression으로-slicing의-capacity-제한하기",style:{position:"relative"}},t.createElement(n.a,{href:"#full-slice-expression%EC%9C%BC%EB%A1%9C-slicing%EC%9D%98-capacity-%EC%A0%9C%ED%95%9C%ED%95%98%EA%B8%B0","aria-label":"full slice expression으로 slicing의 capacity 제한하기 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"full slice expression으로 slicing의 capacity 제한하기"),"\n",t.createElement(n.p,null,"slice expression의 완전한 표현은 ",t.createElement(n.code,null,"[low:high:max]"),"이다."),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,"low ~ high - 1는 slicing된 slice의 length를 표현하고"),"\n",t.createElement(n.li,null,"low ~ max -1은 slicing된 slice의 capacity를 표현한다."),"\n"),"\n",t.createElement(n.p,null,t.createElement(n.code,null,"[low:high:max]"),"는 ",t.createElement(n.code,null,"[low:high]"),"와 표현 결과는 동일하지만, length와 capacity를 동일하게 조정함으로서 적절하게 사용한다면 ",t.createElement(n.em,null,"불필요한 메모리 누수를 방지"),"할 수 있다."),"\n",t.createElement(n.p,null,"또한 length와 capacity가 동일한 slice가 생성되므로 다음 ",t.createElement(n.code,null,"append"),"시 내부 배열을 동적으로 확장하며 기존 slice와의 참조를 끊어낼 수 있다."),"\n",t.createElement(n.h4,{id:"slice-복사하기",style:{position:"relative"}},t.createElement(n.a,{href:"#slice-%EB%B3%B5%EC%82%AC%ED%95%98%EA%B8%B0","aria-label":"slice 복사하기 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Slice 복사하기"),"\n",t.createElement(n.p,null,"내장 함수인 ",t.createElement(n.code,null,"copy"),"를 이용하면 원본 slice의 원소를 대상 slice에게 복제할 수 있다. ",t.createElement(n.code,null,"copy"),"함수의 동작 방식에는 타 언어의 array 복제와 비교해서 약~간 주의할 점이 있다."),"\n",t.createElement(n.p,null,t.createElement(n.code,null,"copy(dest, src)")),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,t.createElement(n.code,null,"dest"),": 대상 slice"),"\n",t.createElement(n.li,null,t.createElement(n.code,null,"src"),": 원본 slice"),"\n"),"\n",t.createElement(n.p,null,t.createElement(n.code,null,"dest")," slice로 복제되는 원소의 개수는 ",t.createElement(n.em,null,"원본 slice의 길이와 대상 slice의 길이의 최솟값"),"으로 맞춰진다."),"\n",t.createElement(n.blockquote,null,"\n",t.createElement(n.p,null,"Copy returns the number of elements copied, which will be the minimum of len(src) and len(dst)."),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,t.createElement(n.a,{href:"https://github.com/golang/go/blob/master/src/builtin/builtin.go",target:"_self",rel:"nofollow"},"Go - builtin.go")),"\n"),"\n"),"\n",t.createElement(n.p,null,"이렇게 말하니까 조금 복잡한데 쉽게 말하면 ",t.createElement("u",null,t.createElement(n.code,null,"dest")," slice가 표현하고 있는 length만큼만 원소가 복제"),"된다고 생각하면 된다. 만약 ",t.createElement(n.code,null,"dest"),"의 length가 더 길 경우, ",t.createElement(n.code,null,"src"),"의 모든 원소가 index 0부터 ",t.createElement(n.code,null,"src"),"의 길이만큼만 복제된다."),"\n",t.createElement(n.p,null,"code의 예시를 통해 확인하자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"src := []int { 1, 2, 3 }\nvar dest []int // empty이자 nil slice\ncopy(dest, src)\t// nil slice에도 copy를 사용할 수 있다. (empty와 동일하게 동작)\nfmt.Println(dest) // []\n")),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,t.createElement(n.code,null,"dest"),"의 length가 0이기 때문에 어떠한 원소도 복사되지 않는다."),"\n"),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"src := []int { 1, 2, 3 }\nvar dest := []int{ 5, 5, 5, 5, 5 }\ncopy(dest, src)\t\nfmt.Println(dest) // [1, 2, 3, 5, 5]\n")),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,t.createElement(n.code,null,"src"),"의 length까지 복사된다. ",t.createElement(n.code,null,"dest"),"의 length는 조작되지 않기에 기존의 element 역시 그대로 표현된다."),"\n"),"\n",t.createElement(n.h2,{id:"slice의-초기화-방식",style:{position:"relative"}},t.createElement(n.a,{href:"#slice%EC%9D%98-%EC%B4%88%EA%B8%B0%ED%99%94-%EB%B0%A9%EC%8B%9D","aria-label":"slice의 초기화 방식 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Slice의 초기화 방식"),"\n",t.createElement(n.p,null,"slice를 초기화하는 방식은 크게 4가지로 나눌 수 있다. code로 먼저 확인하자."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"// 1. nil slice를 생성한다. (할당되지 않음)\nvar s []string\n\n// 2. nil slice를 생성한다. (할당되지 않음)\ns := []string(nil)\n\n// 3. literal을 이용해 empty slice를 생성 & 할당한다.\ns := []string {}\n\n// 4. make를 이용해 empty slice를 생성 & 할당한다.\ns := make([]string, 0)\n")),"\n",t.createElement(n.p,null,"각 방식은 쓰기에 따라 유용한 use case가 다르다. 각 case가 유용한 경우를 살펴보자."),"\n",t.createElement(n.h4,{id:"slice의-최종-길이를-아는-경우-optimization",style:{position:"relative"}},t.createElement(n.a,{href:"#slice%EC%9D%98-%EC%B5%9C%EC%A2%85-%EA%B8%B8%EC%9D%B4%EB%A5%BC-%EC%95%84%EB%8A%94-%EA%B2%BD%EC%9A%B0-optimization","aria-label":"slice의 최종 길이를 아는 경우 optimization permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"slice의 최종 길이를 아는 경우: optimization"),"\n",t.createElement(n.p,null,"slice를 초기화해야할 때 해당 slice가 쓰이는 최종 크기를 아는 경우가 있다. 음··· 대표적으로는 코딩테스트에서 조건에 따라 slice를 초기화하는 예가 있겠다. 이 경우엔 ",t.createElement(n.strong,null,"최종 크기 만큼의 capacity를 미리 지정"),"해두는 것이 효율적이다."),"\n",t.createElement(n.p,null,"길이가 1,000인 slice를 각 index에 1부터 1000까지의 정수로 초기화한다고 생각해보자. 먼저 좋지 않은 예를 확인해보겠다:"),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"func initSlice() {\n  N := 1_000\n  s := make([]int, 0)\t// 혹은 다른 어떤 방식이던, capacity = 0인 empty slice를 초기화하는 경우\n  for i := 0; i < N; i++ {\n    s = append(s, i + 1)\n  }\n\treturn s\n}\n")),"\n",t.createElement(n.p,null,"slice의 최종 길이가, 혹은 어느정도의 크기가 예상되는데도 불구하고 capacity가 0인 slice로 초기화할 경우, Golang에서 내부적으로 slice의 크기를 동적으로 확장하는 과정에서 새 array를 할당하고 복사하며 불필요한 overhead가 발생할 수 있다."),"\n",t.createElement(n.p,null,"capacity를 0으로 초기화할 경우 for loop을 N번 도는 동안 동적 확장은 다음 만큼 수행된다."),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,"N ",t.createElement(n.code,null,"<=")," 1024 구간: k번 (2^k^ ",t.createElement(n.code,null,"<")," N을 만족하는 최대 정수 k) 일어나게 된다."),"\n",t.createElement(n.li,null,"1024 ",t.createElement(n.code,null,"<=")," N 구간:  k + m번 (1024 * 1.25^m^ ",t.createElement(n.code,null,"<")," N을 만족하는 최대 정수 m) 일어나게 된다."),"\n"),"\n",t.createElement(n.p,null,"array를 새로 할당하고 값을 linear하게 복사하는 일은 slice를 다룰 때 피할 수 있다면 피해야하는 overhead이다."),"\n",t.createElement(n.p,null,"따라서 ",t.createElement(n.strong,null,"최종적인 길이를 알거나, 어느 정도 크기가 예상되는 경우엔 capacity를 그만큼 처음에 지정"),"하여, empty slice를 생성하더라도 ",t.createElement("u",null,"동적확장이 요구되는 임계지점을 최대한 늦추는 것"),"이 좋다."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"func initSlice() {\n  N := 1_000 \n  s := make([]int, 0, N)\t\t// length: 0, capacity: 1000 인 slice 초기화.\n  for i := 0; i < N; i++ {\n    s = append(s, i + 1)\n  }\n\treturn s\n}\n")),"\n",t.createElement(n.p,null,"이렇게 초기 capacity를 지정해주면 해당 초기화 로직 실행 동안 동적 확장이 일어나는 것을 피할 수 있다."),"\n",t.createElement(n.h4,{id:"nil-slice--empty-slice",style:{position:"relative"}},t.createElement(n.a,{href:"#nil-slice--empty-slice","aria-label":"nil slice  empty slice permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"nil slice != empty slice"),"\n",t.createElement(n.p,null,"nil slice와 empty slice는 다르다. 일종의 포함관계라고 볼 수 있겠다. 모든 nil slice는 empty slice이지만, 모든 empty slice는 nil slice가 아닐 수도 있다."),"\n",t.createElement(n.p,null,"nil slice는 할당하지 않아도 되기 때문에 empty slice보다는 nil slice를 이용하는 것이 좋다. 게다가 Golang의 ",t.createElement(n.code,null,"append")," 메서드는 nil slice를 parameter로 받을 경우 empty slice로 판단하고 문제없이 연산을 지원한다."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},'func f() []string {\n  var s []string\n  if foo() {\n    s = append(s, "foo")\n  } \n  if bar() {\n    s = append(s, "bar")\n  }\n  return s\n}\n')),"\n",t.createElement(n.ul,null,"\n",t.createElement(n.li,null,t.createElement(n.code,null,"s"),"는 nil slice일 수도 있고, length가 1인 slice일 수도 있다."),"\n"),"\n",t.createElement(n.p,null,"이와 같이 ",t.createElement(n.em,null,"최종 길이를 모르고, slice가 빌 수도 있는 경우"),"엔 nil slice를 이용해서 간결하게 표현하는 것이 좋다."),"\n",t.createElement(n.p,null,"하지만 nil slice와 empty slice는 엄연히 다르다는 것을 명심해야한다. ",t.createElement(n.code,null,"encoding/json")," 패키지의 마샬링 같은 경우엔 nil과 empty slice를 엄격하게 구분한다. 혹은 unit test 시 자주 활용되는 ",t.createElement(n.code,null,"reflect"),"에서도 ",t.createElement(n.code,null,"DeepEqual"),"을 사용하면 두 비교를 false로 return한다."),"\n",t.createElement(n.blockquote,null,"\n",t.createElement(n.p,null,t.createElement(n.strong,null,"encoding.json의 Marshal() 결과")),"\n",t.createElement(n.p,null,"nil slice: ",t.createElement(n.code,null,'{ "name": "leo", "slices": null }')),"\n",t.createElement(n.p,null,"empty slice: ",t.createElement(n.code,null,'{ "name": "bang", "slices": [] }')),"\n"),"\n",t.createElement(n.p,null,"또한 nil 과 empty slice를 다루는 ‘provider’ 측면에서 주의해야할 점은, 두 경우에 대한 context나 의미가 달라지면 user 입장에서 처리하기 복잡해진다는 것이다. Golang의 공식문서에서는 ",t.createElement("u",null,"interface를 디자인할 때 nil slice와 empty slice를 구분하지 말 것"),"을 권장한다. 미묘한 의미 차이를 user 입장에서는 충분히 고려하기 힘들다."),"\n",t.createElement(n.p,null,"예를들어, nil slice인 경우와 empty slice인 경우에 대해서 전달하고자 하는 context가 달라, 각각의 경우에 처리가 따로 필요하다면 다음과 같이 분기처리를 해줘야 한다."),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},"func couldbeEmptyOrNil() []string { /** */ }\n\nfunc userFunc() {\n  s := counldbeEmptyOrNil()\n  \n  if s == nil {\n    // nil 일 경우 처리 \n  } else if len(s) == 0 {\n\t\t// empty 일 경우 처리     \n  } else {\n    // element가 있을 경우 처리 \n  }\n}\n")),"\n",t.createElement(n.p,null,"이보다는 예외 상황을 나타내고 싶다면 ",t.createElement(n.code,null,"error")," 값을 반환하고, ",t.createElement(n.code,null,"len()"),"을 이용해서 해당 slice가 비었는지 정도만 check하도록 하는 것이 좋다."),"\n",t.createElement(n.h4,{id:"초기화할-값이-존재하는-경우-literal-사용",style:{position:"relative"}},t.createElement(n.a,{href:"#%EC%B4%88%EA%B8%B0%ED%99%94%ED%95%A0-%EA%B0%92%EC%9D%B4-%EC%A1%B4%EC%9E%AC%ED%95%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-literal-%EC%82%AC%EC%9A%A9","aria-label":"초기화할 값이 존재하는 경우 literal 사용 permalink",className:"header-links before"},t.createElement(n.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"초기화할 값이 존재하는 경우: literal 사용"),"\n",t.createElement(n.p,null,"다음과 같이 초기화할 값이 존재하는 경우 literal 표현을 이용해서 slice를 초기화할 수 있다. literal을 이용해 초기화된 slice는 ",t.createElement(n.strong,null,"literal에 주어진 원소의 개수만큼 length와 capacity가 동일하게 정해진다"),". (= 다음 append 시 동적 확장이 일어난다.)"),"\n",t.createElement(n.pre,null,t.createElement(n.code,{className:"language-go"},'s := []string { "apple", "banana", "grape" }\n')))}var i=function(e={}){const{wrapper:n}=Object.assign({},(0,a.ah)(),e.components);return n?t.createElement(n,e,t.createElement(c,e)):c(e)},s=l(5670),r=l(1326),m=l(4517),d=l(698),p=l(8627),g=l(662),o=l(1873);const u=({data:e,children:n,serverData:l})=>{const{prevPost:a,nextPost:c}=e,i={...e.mdx.frontmatter,timeToRead:e.mdx.fields.timeToRead};return t.createElement(d.Z,{data:e},t.createElement(s.Z,null,t.createElement(m.Z,i),t.createElement(r.Z,null,n),t.createElement(g.Z,{prev:a,next:c}),t.createElement(p.Z)))};function f(e){return t.createElement(u,e,t.createElement(i,e))}}}]);
//# sourceMappingURL=component---src-templates-article-page-jsx-content-file-path-users-leobang-blog-starter-documents-go-lang-go-understanding-slice-md-a63e05cc6f029f323943.js.map