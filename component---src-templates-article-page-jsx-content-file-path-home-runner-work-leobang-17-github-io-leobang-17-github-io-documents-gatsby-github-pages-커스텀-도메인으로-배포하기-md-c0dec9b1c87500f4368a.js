"use strict";(self.webpackChunkgatsby_theme_simplex=self.webpackChunkgatsby_theme_simplex||[]).push([[2397],{5183:function(e,t,l){l.r(t),l.d(t,{Head:function(){return h.py},default:function(){return d}});var n=l(1151),a=l(7294);function c(e){const t=Object.assign({p:"p",a:"a",code:"code",em:"em",strong:"strong",blockquote:"blockquote",h2:"h2",div:"div",ol:"ol",li:"li",pre:"pre",ul:"ul",h3:"h3",img:"img"},(0,n.ah)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,a.createElement(t.a,{href:"https://docs.github.com/ko/pages",target:"_self",rel:"nofollow"},"Github Pages"),"를 이용해 웹페이지를 호스팅하는 경우 깃허브 측에서 ",a.createElement(t.code,null,"<username>.github.io"),"의 도메인을 기본으로 제공한다. 예를들어, 나는 깃허브 아이디가 ",a.createElement(t.code,null,"leobang17"),"이니 내 경우의 기본 도메인은 ",a.createElement(t.code,null,"leobang17.github.io"),"인 셈."),"\n",a.createElement(t.p,null,"github에서 제공하는 기본 도메인 대신 본인이 구매한 ",a.createElement(t.em,null,"커스텀 도메인"),"을 이용할 수도 있다. Github Pages의 커스텀 도메인 설정은 ",a.createElement(t.strong,null,"publising source의 root에 존재하는 ",a.createElement(t.code,null,"CNAME")," 레코드"),"의 내용을 따른다."),"\n",a.createElement(t.blockquote,null,"\n",a.createElement(t.p,null,"…  If you are publishing from a branch, custom domains are stored in a ",a.createElement(t.em,null,"CNAME file in the root of your publishing source"),"."),"\n"),"\n",a.createElement("br"),"\n",a.createElement(t.h2,{id:"gatsby-웹페이지와-github-pages-호스팅",style:{position:"relative"}},a.createElement(t.a,{href:"#gatsby-%EC%9B%B9%ED%8E%98%EC%9D%B4%EC%A7%80%EC%99%80-github-pages-%ED%98%B8%EC%8A%A4%ED%8C%85","aria-label":"gatsby 웹페이지와 github pages 호스팅 permalink",className:"header-links before"},a.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Gatsby 웹페이지와 Github Pages 호스팅"),"\n",a.createElement(t.p,null,a.createElement(t.code,null,"gatsby build")," 커맨드를 실행하면 Gatsby에 의해 빌드 및 번들링된 정적 파일들이 ",a.createElement(t.code,null,"/public")," 디렉토리에 생성된다. 그리고 보통은 이 ",a.createElement(t.code,null,"/public")," 디렉토리를 publising source로 이용하게 된다."),"\n",a.createElement(t.p,null,"따라서 Gatsby 정적 페이지를 Github Pages에 호스팅할 때 커스텀 도메인을 설정하는 과정은 다음과 같이 나눌 수 있다:"),"\n",a.createElement(t.ol,null,"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.code,null,"gatsby build")," 커맨드를 실행해 ",a.createElement(t.code,null,"/public")," 디렉토리에 빌드 결과물을 생성한다."),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,a.createElement(t.strong,null,a.createElement(t.code,null,"/public")," 디렉토리에 ",a.createElement(t.code,null,"CNAME")," 파일"),"을 생성한다."),"\n",a.createElement(t.pre,null,a.createElement(t.code,null,"# /public/CNAME << filepath\nwww.yourdomain.com\n")),"\n"),"\n",a.createElement(t.li,null,"\n",a.createElement(t.p,null,"빌드 결과 생성된 ",a.createElement(t.strong,null,a.createElement(t.code,null,"/public")," 디렉토리를 Github Pages의 publishing source로 설정"),"하여 배포한다."),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"이 과정을 직접 수행해도 되지만, 나의 경우 ",a.createElement(t.a,{href:"https://www.npmjs.com/package/gh-pages",target:"_self",rel:"nofollow"},a.createElement(t.code,null,"gh-pages")," 라이브러리"),"를 이용해 간소화했다."),"\n",a.createElement(t.li,null,"다음 Docs 내용를 참고해 직접 ",a.createElement(t.a,{href:"https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site",target:"_self",rel:"nofollow"},"publishing source를 설정"),"할 수 있다.","\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"remote 브랜치의 특정 디렉토리를 publishing source로 설정하거나,"),"\n",a.createElement(t.li,null,"github actions workflow를 이용해 publising source를 지정하거나 (Beta)"),"\n"),"\n"),"\n"),"\n"),"\n"),"\n",a.createElement(t.p,null,"이미 Gatsby 웹페이지를 Github Pages로 호스팅하고 있다면 1번과 3번은 갖추어져있는 상태일테니 2번만 추가해주면된다. 즉, 어떤 방법을 쓰든 ",a.createElement(t.strong,null,"publishing source (Gatsby의 경우 ",a.createElement(t.code,null,"/public")," 디렉토리)에 ",a.createElement(t.code,null,"CNAME")," 레코드 파일을 생성"),"하기만 하면 된다."),"\n",a.createElement("br"),"\n",a.createElement(t.h3,{id:"1-호스팅이-끝난-후-직접-설정하기",style:{position:"relative"}},a.createElement(t.a,{href:"#1-%ED%98%B8%EC%8A%A4%ED%8C%85%EC%9D%B4-%EB%81%9D%EB%82%9C-%ED%9B%84-%EC%A7%81%EC%A0%91-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0","aria-label":"1 호스팅이 끝난 후 직접 설정하기 permalink",className:"header-links before"},a.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"1. 호스팅이 끝난 후 직접 설정하기"),"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site?platform=mac#configuring-an-apex-domain",target:"_self",rel:"nofollow"},"Github Pages Docs의 Apex 도메인 설정하기")," 참고. 레포지토리의 ",a.createElement(t.code,null,"Settings > Pages")," 탭에 들어가 ",a.createElement(t.strong,null,"Custom Domain"),"을 수동으로 설정해준다."),"\n",a.createElement(t.img,{src:"./imgs/%E1%84%8C%E1%85%B5%E1%86%A8%E1%84%8C%E1%85%A5%E1%86%B8-%E1%84%8F%E1%85%A5%E1%84%89%E1%85%B3%E1%84%90%E1%85%A5%E1%86%B7%E1%84%83%E1%85%A9%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AB-%E1%84%89%E1%85%A5%E1%86%AF%E1%84%8C%E1%85%A5%E1%86%BC.png",alt:"직접 커스텀 도메인 설정"}),"\n",a.createElement(t.p,null,"배포가 끝난 후 직접 바꾸어주는 방식이므로 매 빌드/배포 마다 커스텀 도메인을 직접 설정해주어야 한다는 번거로움이 있다. 사실 이 과정이 너무 귀찮아서 밑의 해결방법을 찾아보게 되었다."),"\n",a.createElement("br"),"\n",a.createElement(t.h3,{id:"2-스크립트를-이용해-빌드-이후-cname-레코드-생성하기-자동화",style:{position:"relative"}},a.createElement(t.a,{href:"#2-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%9D%B4%EC%9A%A9%ED%95%B4-%EB%B9%8C%EB%93%9C-%EC%9D%B4%ED%9B%84-cname-%EB%A0%88%EC%BD%94%EB%93%9C-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0-%EC%9E%90%EB%8F%99%ED%99%94","aria-label":"2 스크립트를 이용해 빌드 이후 cname 레코드 생성하기 자동화 permalink",className:"header-links before"},a.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"2. 스크립트를 이용해 빌드 이후 CNAME 레코드 생성하기 (자동화)"),"\n",a.createElement(t.p,null,a.createElement(t.code,null,"/public")," 디렉토리 안에 ",a.createElement(t.code,null,"CNAME")," 레코드 파일을 생성하는 스크립트를 페이지 빌드가 끝난 후 실행한다. (i.e. ",a.createElement(t.code,null,"echo www.yourdomain.com > ./public/CNAME"),")"),"\n",a.createElement(t.p,null,"내 경우엔 ",a.createElement(t.a,{href:"https://github.com/tschaub/gh-pages#deploying-to-github-pages-with-custom-domain",target:"_self",rel:"nofollow"},a.createElement(t.code,null,"gh-pages")," Docs의 custom domain 항목"),"를 참고해 ",a.createElement(t.code,null,"package.json")," 스크립트에 추가했지만 github actions를 이용해 배포하고 있다면 github actions가 실행할 workflow 스크립트에 넣어주어도 된다."),"\n",a.createElement("br"),"\n",a.createElement(t.h3,{id:"3-static-폴더-이용하기-자동화",style:{position:"relative"}},a.createElement(t.a,{href:"#3-static-%ED%8F%B4%EB%8D%94-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0-%EC%9E%90%EB%8F%99%ED%99%94","aria-label":"3 static 폴더 이용하기 자동화 permalink",className:"header-links before"},a.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"3. static 폴더 이용하기 (자동화)"),"\n",a.createElement(t.p,null,"gatsby 프로젝트의 root에 위치한 ",a.createElement(t.code,null,"static")," 폴더는 특별한 역할을 한다. 해당 폴더 안에 저장된 모든 파일은 빌드 시점에 ",a.createElement(t.code,null,"/public")," 폴더로 동일하게 복사된다."),"\n",a.createElement(t.blockquote,null,"\n",a.createElement(t.p,null,"You can create a folder named ",a.createElement(t.code,null,"static")," at the root of your project. Every file you put into that folder will be copied into the ",a.createElement(t.code,null,"public")," folder. E.g. if you add a file named ",a.createElement(t.code,null,"sun.jpg")," to the static folder, it’ll be copied to ",a.createElement(t.code,null,"public/sun.jpg")),"\n"),"\n",a.createElement(t.p,null,"따라서 ",a.createElement(t.code,null,"static")," 폴더에 ",a.createElement(t.code,null,"CNAME")," 파일을 미리 생성해놓으면 gatsby에 의해 ",a.createElement(t.code,null,"/public")," 폴더에 ",a.createElement(t.code,null,"CNAME")," 파일이 복사된다."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-text"},"# /static/CNAME << filepath \nwww.yourdomain.com\n")),"\n",a.createElement("br"),"\n",a.createElement("br"),"\n",a.createElement(t.h2,{id:"references",style:{position:"relative"}},a.createElement(t.a,{href:"#references","aria-label":"references permalink",className:"header-links before"},a.createElement(t.div,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"References"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,a.createElement(t.a,{href:"https://www.gatsbyjs.com/docs/how-to/images-and-media/static-folder/#adding-assets-outside-of-the-module-system",target:"_self",rel:"nofollow"},"Gatsby Docs - static 폴더 이용하기")),"\n",a.createElement(t.li,null,a.createElement(t.a,{href:"https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/troubleshooting-custom-domains-and-github-pages#custom-domain-names-that-are-unsupported",target:"_self",rel:"nofollow"},"Github Pages Docs - Custom Domain 설정과 CNAME 레코드")),"\n"))}var r=function(e={}){const{wrapper:t}=Object.assign({},(0,n.ah)(),e.components);return t?a.createElement(t,e,a.createElement(c,e)):c(e)},o=l(5670),i=l(1326),s=l(4517),u=l(698),E=l(8627),m=l(662),h=l(1873);const g=({data:e,children:t,serverData:l})=>{const{prevPost:n,nextPost:c}=e,r={...e.mdx.frontmatter,timeToRead:e.mdx.fields.timeToRead};return a.createElement(u.Z,{data:e},a.createElement(o.Z,null,a.createElement(s.Z,r),a.createElement(i.Z,null,t),a.createElement(m.Z,{prev:n,next:c}),a.createElement(E.Z)))};function d(e){return a.createElement(g,e,a.createElement(r,e))}}}]);
//# sourceMappingURL=component---src-templates-article-page-jsx-content-file-path-home-runner-work-leobang-17-github-io-leobang-17-github-io-documents-gatsby-github-pages-커스텀-도메인으로-배포하기-md-c0dec9b1c87500f4368a.js.map